import{j as r}from"./jsx-runtime-Cl2eCCBe.js";import{r as o,R as i}from"./index-Cqyox1Tj.js";const M={subtree:!0,childList:!0,attributeFilter:["style","class"]};function y(t,a,n=M){o.useEffect(()=>{if(!t)return;let e;const s=Array.isArray(t)?t:[t];return"MutationObserver"in window&&(e=new MutationObserver(a),s.forEach(c=>{e.observe(c,n)})),()=>{e==null||e.takeRecords(),e==null||e.disconnect()}},[n,t,a])}const p=t=>{const{options:a,onMutate:n=()=>{},children:e}=t,s=i.useRef(null),[c,b]=i.useState(),v=o.useCallback(n,[n]);return y(c,v,a),o.useLayoutEffect(()=>{b(s.current)},[]),e?i.cloneElement(e,{ref:s}):null};p.__docgenInfo={description:"",methods:[],displayName:"MutateObserver",props:{options:{required:!1,tsType:{name:"MutationObserverInit"},description:""},onMutate:{required:!1,tsType:{name:"signature",type:"function",raw:"(mutations: MutationRecord[], observer: MutationObserver) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"MutationRecord"}],raw:"MutationRecord[]"},name:"mutations"},{type:{name:"MutationObserver"},name:"observer"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""}}};const f=t=>{const[a,n]=o.useState("aaa");o.useEffect(()=>{setTimeout(()=>n("bbb"),2e3)},[]);const e=function(s){alert("触发回调")};return r.jsx(p,{...t,onMutate:e,children:r.jsx("div",{id:"container",children:r.jsx("div",{className:a,children:a==="aaa"?r.jsx("div",{children:"aaa"}):r.jsx("div",{children:r.jsx("p",{children:"bbb"})})})})})},g={title:"components/MutateObserver",component:f,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},u={args:{children:r.jsx(r.Fragment,{})},render:f};var d,l,m;u.parameters={...u.parameters,docs:{...(d=u.parameters)==null?void 0:d.docs,source:{originalSource:`{
  args: {
    children: <></>
  },
  render: renderMutateObserver
}`,...(m=(l=u.parameters)==null?void 0:l.docs)==null?void 0:m.source}}};const x=["Default"];export{u as Default,x as __namedExportsOrder,g as default};
